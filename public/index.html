<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <title>GoalShift â€“ GÃ¼nde tek maÃ§, istatistiÄŸe dayalÄ± tek tahmin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: radial-gradient(circle at top, #101827, #020617 60%);
        color: #e5e7eb;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }
      .card {
        width: 100%;
        max-width: 480px;
        background: rgba(15, 23, 42, 0.96);
        border-radius: 24px;
        padding: 28px 24px 24px;
        box-shadow: 0 24px 60px rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(55, 65, 81, 0.7);
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        padding: 4px 10px;
        border-radius: 999px;
        background: rgba(22, 163, 74, 0.14);
        color: #bbf7d0;
        border: 1px solid rgba(34, 197, 94, 0.35);
        margin-bottom: 14px;
      }
      .logo {
        font-weight: 800;
        font-size: 24px;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        margin-bottom: 8px;
      }
      .logo span {
        color: #22c55e;
      }
      .subtitle {
        font-size: 13px;
        color: #9ca3af;
        margin-bottom: 24px;
      }
      .section-title {
        font-size: 14px;
        font-weight: 600;
        color: #e5e7eb;
        margin-bottom: 6px;
      }
      .section-text {
        font-size: 13px;
        color: #9ca3af;
        margin-bottom: 16px;
      }
      .btn {
        width: 100%;
        border: none;
        border-radius: 999px;
        padding: 11px 18px;
        font-size: 14px;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        cursor: pointer;
        background: linear-gradient(90deg, #22c55e, #16a34a);
        color: #022c22;
        box-shadow: 0 18px 40px rgba(22, 163, 74, 0.45);
        transition: transform 0.08s ease, box-shadow 0.08s ease,
          filter 0.08s ease;
      }
      .btn:hover {
        transform: translateY(-1px);
        filter: brightness(1.05);
        box-shadow: 0 22px 55px rgba(34, 197, 94, 0.5);
      }
      .btn:active {
        transform: translateY(0);
        box-shadow: 0 10px 25px rgba(22, 163, 74, 0.4);
      }
      .btn-lock {
        font-size: 12px;
      }
      .status {
        margin-top: 16px;
        font-size: 12px;
        color: #9ca3af;
      }
      .status span {
        color: #a5b4fc;
      }
      .footnote {
        margin-top: 20px;
        font-size: 11px;
        color: #6b7280;
        line-height: 1.4;
      }
    </style>
  </head>
  <body>
    <main class="card">
      <div class="badge">
        <span>GoalShift</span>
        <span>beta</span>
      </div>

      <div class="logo">
        GOAL<span>SHIFT</span>
      </div>
      <p class="subtitle">
        GÃ¼nde tek maÃ§. Tamamen istatistiÄŸe ve canlÄ± verilere dayalÄ± tek tahmin.
        Ã–nce giriÅŸ yap, sonra â€œbugÃ¼nÃ¼n seÃ§imiâ€ni burada gÃ¶receksin.
      </p>

      <p class="section-title">BugÃ¼nÃ¼n tahmini</p>
      <p class="section-text">
        Ä°lk adÄ±mda sadece giriÅŸ altyapÄ±sÄ±nÄ± kuruyoruz. Google ile giriÅŸ yaptÄ±ktan
        sonra seni otomatik olarak kayÄ±t edeceÄŸiz ve bir sonraki adÄ±mda tek maÃ§
        panelini buraya baÄŸlayacaÄŸÄ±z.
      </p>

      <button id="google-login-btn" class="btn">
        <span class="btn-lock">ğŸ”’</span>
        <span>Google ile giriÅŸ yap</span>
      </button>

      <p id="status-text" class="status">
        Durum: <span>HenÃ¼z giriÅŸ yapÄ±lmadÄ±.</span>
      </p>

      <p class="footnote">
        GiriÅŸ yaptÄ±ÄŸÄ±nda hesabÄ±n sadece GoalShift iÃ§indeki tahmin geÃ§miÅŸini
        tutmak iÃ§in kullanÄ±lacak. Ä°stediÄŸin zaman hesabÄ±nÄ± sildirebileceksin.
      </p>
    </main>

    <!-- Firebase baÄŸlantÄ±sÄ± -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
      import {
        getAuth,
        GoogleAuthProvider,
        signInWithPopup,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        setDoc,
      } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

      // ğŸ”´ BURAYI KENDÄ° FIREBASE CONFIG'Ä°NLE DOLDUR
      const firebaseConfig = {
        apiKey: "AIzaSyB55Fzupjc0Ki2-FZiTlnyCziaD_Dy1DlI",
        authDomain: "goalshift-app.firebaseapp.com",
        projectId: "goalshift-app",
        storageBucket: "goalshift-app.firebasestorage.app",
        messagingSenderId: "10190573722",
        appId: "1:10190573722:web:93ba014a4263ce1702cf23",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();
      const db = getFirestore(app);

      const loginBtn = document.getElementById("google-login-btn");
      const statusText = document.getElementById("status-text");

      function setStatus(text) {
        if (!statusText) return;
        const span = statusText.querySelector("span");
        if (span) span.textContent = text;
      }

      loginBtn?.addEventListener("click", async () => {
        try {
          setStatus("Google penceresi aÃ§Ä±lÄ±yor...");
          const result = await signInWithPopup(auth, provider);
          const user = result.user;

          // KullanÄ±cÄ±yÄ± Firestore'a kaydet / gÃ¼ncelle
          await setDoc(
            doc(db, "users", user.uid),
            {
              email: user.email,
              name: user.displayName ?? "",
              photoURL: user.photoURL ?? "",
              lastLogin: new Date(),
            },
            { merge: true }
          );

          setStatus(
            `HoÅŸ geldin ${
              (user.displayName || "").split(" ")[0]
            }! Tahmin ekranÄ±nÄ± bir sonraki adÄ±mda baÄŸlayacaÄŸÄ±z.`
          );
        } catch (err) {
          console.error(err);
          setStatus("GiriÅŸte bir hata oluÅŸtu.");
          alert("GiriÅŸte bir hata oluÅŸtu: " + err.message);
        }
      });

      onAuthStateChanged(auth, (user) => {
        if (user) {
          loginBtn.querySelector("span:nth-child(2)").textContent =
            "Google ile baÄŸlÄ±sÄ±n";
          setStatus(
            `Åu anda ${user.email} ile giriÅŸ yapmÄ±ÅŸ durumdasÄ±n. Ã‡Ä±kÄ±ÅŸ iÃ§in butona uzun basmayÄ± kullanacaÄŸÄ±z (bir sonraki adÄ±mda).`
          );
        } else {
          loginBtn.querySelector("span:nth-child(2)").textContent =
            "Google ile giriÅŸ yap";
          setStatus("HenÃ¼z giriÅŸ yapÄ±lmadÄ±.");
        }
      });
    </script>
  </body>
</html>
